{"source_id":"331235976078703216","version":"1","workflow":{"name":"Deploy node-core release candidate deploy-all script","blueprint":{"version":"1","trigger":{"type":"webhook","id":"20a68615-70ba-444b-8a13-c72dbc401624","config":{"url":"","variables":[{"type":"text","key":"initial_rc_branch_name","client_id":"85cbc6e6-6a49-4705-9869-a51e75afc75d"},{"type":"text","key":"rc_version","client_id":"1e2d5a97-8548-4f87-964a-830f7bac98e0"},{"type":"text","key":"unresolved_eng_svcs_tickets","client_id":"72b9be60-49e9-4307-9953-3c5714a2f863"},{"type":"text","key":"unresolved_cust_tickets","client_id":"6be7b6b5-d535-486d-a6ef-445bffbe1905"},{"type":"text","key":"unresolved_claims_tickets","client_id":"16bdf891-32eb-499c-8bf1-9e149c2c15df"},{"type":"text","key":"unresolved_merch_tickets","client_id":"10efb690-627a-4c4f-af18-f2dbf1d41c97"},{"type":"text","key":"unresolved_partner_tickets","client_id":"1eedc908-8022-4635-9c94-753863e81f5c"},{"type":"text","key":"rc_resolution_branch","client_id":"42571850-a57a-4fbf-b4b2-dac1a2c7d048"},{"type":"text","key":"all_rc_prs","client_id":"4f51fded-8107-4e1e-a4c9-20d2b325fb0d"},{"type":"text","key":"carryover_prs","client_id":"aeca6b9f-ec58-4bec-8549-3ca2461606ab"},{"type":"text","key":"all_sdlc2","client_id":"91d38598-c12b-4b47-a7b6-592e2460a051"}],"revoked_token":false}},"steps":[{"type":"message","id":"a5d09dc4-6717-45c8-9883-da8a2d3887ca","config":{"channel":{"value":"CGDARQ404"},"has_button":false,"message_text":"<!subteam^SSUGGDDCG|@product-team>, <!subteam^SUQQE9MFT|@merchants-success> a new node-core release candidate has been initiated:\n\nRelease version: release/{{20a68615-70ba-444b-8a13-c72dbc401624==1e2d5a97-8548-4f87-964a-830f7bac98e0==text}}\nThe release version adds a numeric label for all of the code that is going out in a release.\n\nUnresolved release branch:{{20a68615-70ba-444b-8a13-c72dbc401624==85cbc6e6-6a49-4705-9869-a51e75afc75d==text}}\nThis serves as a marker within the node-core master branch of roughly what code is going out at a given point.  The code in this branch will not reflect the final release candidate, but it is a baseline.  If there are no tickets to resolve, the contents of this branch will go to production without any additional changes.\n\nTicket resolution branch: {{20a68615-70ba-444b-8a13-c72dbc401624==42571850-a57a-4fbf-b4b2-dac1a2c7d048==text}}\nThis is the branch which engineers will make changes on in order to make unresolved tickets deployable.  All PRs to add feature flags or revert code should be made against this branch.  Likewise, the branch where the change is made should be cut from this branch.\n\nThe following set of PRs is included in the unresolved release branch:\n{{20a68615-70ba-444b-8a13-c72dbc401624==4f51fded-8107-4e1e-a4c9-20d2b325fb0d==text}}\n\nIn the next steps we will identify which tickets need to be resolved in order to be deployed to production.\n\nThese tickets will be excluded from the deploy since they are independently deployed:\n\n{{20a68615-70ba-444b-8a13-c72dbc401624==91d38598-c12b-4b47-a7b6-592e2460a051==text}}","message_blocks":[{"type":"rich_text","elements":[{"type":"rich_text_section","elements":[{"type":"usergroup","usergroup_id":"SSUGGDDCG"},{"text":", ","type":"text"},{"type":"usergroup","usergroup_id":"SUQQE9MFT"},{"text":" a new node-core release candidate has been initiated:\n\n","type":"text"},{"text":"Release version","type":"text","style":{"bold":true}},{"text":": ","type":"text"},{"text":"release/","type":"text","style":{"code":true}},{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==1e2d5a97-8548-4f87-964a-830f7bac98e0==text","property":"","data_type":"text"},{"text":"\nThe release version adds a numeric label for all of the code that is going out in a release.\n\n","type":"text"},{"text":"Unresolved release branch","type":"text","style":{"bold":true}},{"text":":","type":"text"},{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==85cbc6e6-6a49-4705-9869-a51e75afc75d==text","property":"","data_type":"text","style":{"code":true}},{"text":"\nThis serves as a marker within the node-core master branch of roughly what code is going out at a given point.  The code in this branch will not reflect the final release candidate, but it is a baseline.  If there are no tickets to resolve, the contents of this branch will go to production without any additional changes.\n\n","type":"text"},{"text":"Ticket resolution branch","type":"text","style":{"bold":true}},{"text":": ","type":"text"},{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==42571850-a57a-4fbf-b4b2-dac1a2c7d048==text","property":"","data_type":"text","style":{"code":true}},{"text":"\nThis is the branch which engineers will make changes on in order to make unresolved tickets deployable.  All PRs to add feature flags or revert code should be made against this branch.  Likewise, the branch where the change is made should be cut from this branch.\n\nThe following set of PRs is included in the unresolved release branch:\n","type":"text"}]},{"type":"rich_text_preformatted","elements":[{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==4f51fded-8107-4e1e-a4c9-20d2b325fb0d==text","property":"","data_type":"text"},{"text":"  ","type":"text"}]},{"type":"rich_text_section","elements":[{"text":"\nIn the next steps we will identify which tickets need to be resolved in order to be deployed to production.\n\nThese tickets will be excluded from the deploy since they are independently deployed:\n\n","type":"text"}]},{"type":"rich_text_preformatted","elements":[{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==91d38598-c12b-4b47-a7b6-592e2460a051==text","property":"","data_type":"text"},{"text":" ","type":"text"}]}]}]}},{"type":"message","id":"a71b6588-6b44-43b7-92ac-66c9e88cc0ca","config":{"thread":{"ref":"a5d09dc4-6717-45c8-9883-da8a2d3887ca==message_data"},"has_button":true,"button_label":"Review unresolved tickets","message_text":"In order to resolve all of the tickets which aren’t marked as ‘Done’, one or more of these solutions should be made to get each of the tickets in one or more acceptable deployment states:\n\nA) Ticket is tested and work as expected.  Only If the ticket is already in status Ready for QA AND can be tested by 4:00 today\n\nB) Ticket is feature flagged so it can be deployed in an unready state.  Engineer should open a pull request for feature flag code against {{20a68615-70ba-444b-8a13-c72dbc401624==42571850-a57a-4fbf-b4b2-dac1a2c7d048==text}}\n\nC) Ticket is reverted from the release candidate.  An engineer should cut a branch from {{20a68615-70ba-444b-8a13-c72dbc401624==42571850-a57a-4fbf-b4b2-dac1a2c7d048==text}} , locate all PRs related to a ticket and run git revert [commit] on the branch for each PR which needs to be reverted.  Please open a pull request against {{20a68615-70ba-444b-8a13-c72dbc401624==42571850-a57a-4fbf-b4b2-dac1a2c7d048==text}} when ready.\n\nD) Ticket is deployed to prod as-is without testing.  Note: Unless the authoring engineer is 100% confident about a ticket going out as-is then it should not be deployed!\n\n<!subteam^SV1UHR4H1|@qa-team>, please click the button to begin reviewing unresolved tickets.\n\nAdditionally, we will need to review these carryover PRs from the previous release candidate to determine if they need to be added to the release (if they are not already in master):\n\n{{20a68615-70ba-444b-8a13-c72dbc401624==aeca6b9f-ec58-4bec-8549-3ca2461606ab==text}}","message_blocks":[{"type":"rich_text","elements":[{"type":"rich_text_section","elements":[{"text":"In order to resolve all of the tickets which aren’t marked as ‘Done’, one or more of these solutions should be made to get each of the tickets in one or more acceptable deployment states:\n\nA) Ticket is tested and work as expected.  Only ","type":"text"},{"text":"If","type":"text","style":{"bold":true}},{"text":" the ticket is already in status Ready for QA ","type":"text"},{"text":"AND","type":"text","style":{"bold":true}},{"text":" can be tested by 4:00 today\n\nB) Ticket is feature flagged so it can be deployed in an unready state.  Engineer should open a pull request for feature flag code against ","type":"text"},{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==42571850-a57a-4fbf-b4b2-dac1a2c7d048==text","property":"","data_type":"text"},{"text":"\n\nC) Ticket is reverted from the release candidate.  An engineer should cut a branch from ","type":"text"},{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==42571850-a57a-4fbf-b4b2-dac1a2c7d048==text","property":"","data_type":"text"},{"text":" , locate all PRs related to a ticket and run ","type":"text"},{"text":"git revert [commit]","type":"text","style":{"code":true}},{"text":" on the branch for each PR which needs to be reverted.  Please open a pull request against ","type":"text"},{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==42571850-a57a-4fbf-b4b2-dac1a2c7d048==text","property":"","data_type":"text"},{"text":" when ready.\n\nD) Ticket is deployed to prod as-is without testing.  ","type":"text"},{"text":"Note: Unless the authoring engineer is 100% confident about a ticket going out as-is then it should not be deployed!","type":"text","style":{"bold":true}},{"text":"\n\n","type":"text"},{"type":"usergroup","usergroup_id":"SV1UHR4H1"},{"text":", please click the button to begin reviewing unresolved tickets.\n\nAdditionally, we will need to review these carryover PRs from the previous release candidate to determine if they need to be added to the release (if they are not already in master):\n\n","type":"text"}]},{"type":"rich_text_preformatted","elements":[{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==aeca6b9f-ec58-4bec-8549-3ca2461606ab==text","property":"","data_type":"text"},{"text":" ","type":"text"}]}]}]}},{"type":"message","id":"3bb2ebc7-82ec-4fca-a4d5-73ede6088568","config":{"channel":{"value":"CTGKFC7CY"},"has_button":false,"message_text":"<@USB1YRF8C>, Please review the list of unresolved tickets for Engineering Services:\n\n{{20a68615-70ba-444b-8a13-c72dbc401624==72b9be60-49e9-4307-9953-3c5714a2f863==text}}\n\n All conversation about this tickets may be made as a reply on this thread.  If there are no tickets in the list this message can be ignored.","message_blocks":[{"type":"rich_text","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"USB1YRF8C"},{"text":", Please review the list of unresolved tickets for Engineering Services:\n\n","type":"text"}]},{"type":"rich_text_preformatted","elements":[{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==72b9be60-49e9-4307-9953-3c5714a2f863==text","property":"","data_type":"text"},{"text":" ","type":"text"}]},{"type":"rich_text_section","elements":[{"text":"\n All conversation about this tickets may be made as a reply on this thread.  If there are no tickets in the list this message can be ignored.","type":"text"}]}]}]}},{"type":"message","id":"d7f95408-798a-4f60-892a-d7897b9e17b9","config":{"channel":{"value":"CRA7GA9DY"},"has_button":false,"message_text":"<@UTP776HB3>, Please review the list of unresolved tickets for Customers:\n\n{{20a68615-70ba-444b-8a13-c72dbc401624==6be7b6b5-d535-486d-a6ef-445bffbe1905==text}}\n\n All conversation about this tickets may be made as a reply on this thread.  If there are no tickets in the list this message can be ignored.","message_blocks":[{"type":"rich_text","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UTP776HB3"},{"text":", Please review the list of unresolved tickets for Customers:\n\n","type":"text"}]},{"type":"rich_text_preformatted","elements":[{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==6be7b6b5-d535-486d-a6ef-445bffbe1905==text","property":"","data_type":"text"},{"text":" ","type":"text"}]},{"type":"rich_text_section","elements":[{"text":"\n All conversation about this tickets may be made as a reply on this thread.  If there are no tickets in the list this message can be ignored.","type":"text"}]}]}]}},{"type":"message","id":"b4b59912-25f1-442c-afcd-79a377f02256","config":{"channel":{"value":"CN8713P0F"},"has_button":false,"message_text":"<@U015Z9Z9C90>, Please review the list of unresolved tickets for Partners:\n\n{{20a68615-70ba-444b-8a13-c72dbc401624==1eedc908-8022-4635-9c94-753863e81f5c==text}}\n\n All conversation about this tickets may be made as a reply on this thread.  If there are no tickets in the list this message can be ignored.","message_blocks":[{"type":"rich_text","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U015Z9Z9C90"},{"text":", Please review the list of unresolved tickets for Partners:\n\n","type":"text"}]},{"type":"rich_text_preformatted","elements":[{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==1eedc908-8022-4635-9c94-753863e81f5c==text","property":"","data_type":"text"},{"text":" ","type":"text"}]},{"type":"rich_text_section","elements":[{"text":"\n All conversation about this tickets may be made as a reply on this thread.  If there are no tickets in the list this message can be ignored.","type":"text"}]}]}]}},{"type":"message","id":"bc765bda-b66f-4543-9248-35c3ce86491a","config":{"channel":{"value":"C017P3TKPK8"},"has_button":false,"message_text":"<@UTP776HB3>, Please review the list of unresolved tickets for Claims:\n\n{{20a68615-70ba-444b-8a13-c72dbc401624==16bdf891-32eb-499c-8bf1-9e149c2c15df==text}}\n\n All conversation about this tickets may be made as a reply on this thread.  If there are no tickets in the list this message can be ignored.","message_blocks":[{"type":"rich_text","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UTP776HB3"},{"text":", Please review the list of unresolved tickets for Claims:\n\n","type":"text"}]},{"type":"rich_text_preformatted","elements":[{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==16bdf891-32eb-499c-8bf1-9e149c2c15df==text","property":"","data_type":"text"},{"text":" ","type":"text"}]},{"type":"rich_text_section","elements":[{"text":"\n All conversation about this tickets may be made as a reply on this thread.  If there are no tickets in the list this message can be ignored.","type":"text"}]}]}]}},{"type":"message","id":"927da1ad-f94b-4acd-bdd0-6117f8fb6357","config":{"channel":{"value":"CRQSXD5SB"},"has_button":false,"message_text":"<@ULSL0F1D5>, Please review the list of unresolved tickets for Engineering Services:\n\n{{20a68615-70ba-444b-8a13-c72dbc401624==10efb690-627a-4c4f-af18-f2dbf1d41c97==text}}\n\n All conversation about this tickets may be made as a reply on this thread.  If there are no tickets in the list this message can be ignored..","message_blocks":[{"type":"rich_text","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"ULSL0F1D5"},{"text":", Please review the list of unresolved tickets for Engineering Services:\n\n","type":"text"}]},{"type":"rich_text_preformatted","elements":[{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==10efb690-627a-4c4f-af18-f2dbf1d41c97==text","property":"","data_type":"text"},{"text":" ","type":"text"}]},{"type":"rich_text_section","elements":[{"text":"\n All conversation about this tickets may be made as a reply on this thread.  If there are no tickets in the list this message can be ignored..","type":"text"}]}]}]}},{"type":"message","id":"fafd6635-251a-44ab-9a9f-b548379a5fae","config":{"channel":{"value":"CGDARQ404"},"has_button":true,"button_label":"Release candidate resolved","message_text":"<@USB1YRF8C>, once all of the unresolved tickets are ready, please press the button below to indicate that all of the tickets in the release candidate are resolved, and the release candidate is ready to deploy to stage.","message_blocks":[{"type":"rich_text","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"USB1YRF8C"},{"text":", once all of the unresolved tickets are ready, please press the button below to indicate that all of the tickets in the release candidate are resolved, and the release candidate is ready to deploy to stage.","type":"text"}]}]}]}},{"type":"message","id":"4dbd3edd-c5cc-480f-adf4-255ab12c659d","config":{"channel":{"value":"CGDARQ404"},"has_button":true,"button_label":"Stage Deploy Finished","message_text":"<!subteam^S01DJDM4WK0|@deployment-team>, please deploy {{20a68615-70ba-444b-8a13-c72dbc401624==42571850-a57a-4fbf-b4b2-dac1a2c7d048==text}} to stage\n\nPlease click the button below once the stage deploy is finished.","message_blocks":[{"type":"rich_text","elements":[{"type":"rich_text_section","elements":[{"type":"usergroup","usergroup_id":"S01DJDM4WK0"},{"text":", please deploy ","type":"text"},{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==42571850-a57a-4fbf-b4b2-dac1a2c7d048==text","property":"","data_type":"text"},{"text":" to stage\n\nPlease click the button below once the stage deploy is finished.","type":"text"}]}]}]}},{"type":"message","id":"a3a223f1-bd5c-452c-a719-ec6ae9681f24","config":{"thread":{"ref":"fafd6635-251a-44ab-9a9f-b548379a5fae==message_data"},"has_button":true,"button_label":"All Testing Completed","message_text":"A new service has been deployed to stage for the Service:\n\nPlease conduct final testing before deployment to production. Please reply to this message with Testing for {your team} is completed successfully .  If there are issues please bring them up in the reply message.  <@USB1YRF8C> once the testing is completed please press the button below to indicate that the release candidate is ready for deploy.","message_blocks":[{"type":"rich_text","elements":[{"type":"rich_text_section","elements":[{"text":"A new service has been deployed to stage for the Service:\n\nPlease conduct final testing before deployment to production. Please reply to this message with ","type":"text"},{"text":"Testing for {your team} is completed successfully","type":"text","style":{"code":true}},{"text":" .  If there are issues please bring them up in the reply message.  ","type":"text"},{"type":"user","user_id":"USB1YRF8C"},{"text":" once the testing is completed please press the button below to indicate that the release candidate is ready for deploy.","type":"text"}]}]}]}},{"type":"message","id":"c3a4cd87-0651-46b2-ba1e-b1b3860ec44a","config":{"thread":{"ref":"4dbd3edd-c5cc-480f-adf4-255ab12c659d==message_data"},"has_button":true,"button_label":"Deployed to Production","message_text":"<!subteam^S01DJDM4WK0|@deployment-team>, the release candidate is ready to be deployed to production.  Please run the deploy-all script on production for branch release/{{20a68615-70ba-444b-8a13-c72dbc401624==1e2d5a97-8548-4f87-964a-830f7bac98e0==text}}.\n\nOnce all of the pipelines are complete, please press the button below:","message_blocks":[{"type":"rich_text","elements":[{"type":"rich_text_section","elements":[{"type":"usergroup","usergroup_id":"S01DJDM4WK0"},{"text":", the release candidate is ready to be deployed to production.  Please run the deploy-all script on production for branch ","type":"text"},{"text":"release/","type":"text","style":{"code":true}},{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==1e2d5a97-8548-4f87-964a-830f7bac98e0==text","property":"","data_type":"text","style":{"code":true}},{"text":".\n\nOnce all of the pipelines are complete, please press the button below:","type":"text"}]}]}]}},{"type":"message","id":"c4b315bb-d143-4334-9c25-7ea4e426757e","config":{"thread":{"ref":"a3a223f1-bd5c-452c-a719-ec6ae9681f24==message_data"},"has_button":true,"button_label":"Deploy Tickets Posted","message_text":"Attention <!subteam^SSUGGDDCG|@product-team><!subteam^SUQQE9MFT|@merchants-success>, release candidate release/{{20a68615-70ba-444b-8a13-c72dbc401624==1e2d5a97-8548-4f87-964a-830f7bac98e0==text}} has been deployed.  <@USB1YRF8C>, please reply to this message with the full list of deployed PRs.","message_blocks":[{"type":"rich_text","elements":[{"type":"rich_text_section","elements":[{"text":"Attention ","type":"text"},{"type":"usergroup","usergroup_id":"SSUGGDDCG"},{"type":"usergroup","usergroup_id":"SUQQE9MFT"},{"text":", release candidate ","type":"text"},{"text":"release/","type":"text","style":{"code":true}},{"type":"workflowtoken","id":"20a68615-70ba-444b-8a13-c72dbc401624==1e2d5a97-8548-4f87-964a-830f7bac98e0==text","property":"","data_type":"text","style":{"code":true}},{"text":" has been deployed.  ","type":"text"},{"type":"user","user_id":"USB1YRF8C"},{"text":", please reply to this message with the full list of deployed PRs.","type":"text"}]}]}]}}]}}}